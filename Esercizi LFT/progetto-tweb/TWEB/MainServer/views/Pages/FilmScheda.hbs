{{>search}}
<div class="container mt-5">
    <div class="card">
        <div class="card-header">
            <h1 id="filmTitle">Titolo del Film</h1>
        </div>
        <div class="card-body row">
            <!-- Poster -->
            <div class="col-md-4">
                <img id="filmPoster" src="" alt="Poster del film" class="img-fluid mb-3">
            </div>
            <!-- Dettagli del film -->
            <div class="col-md-8">
                <p><strong>Anno di uscita:</strong> <span id="filmRelease"></span></p>
                <p><strong>Lingua:</strong> <span id="filmLanguage"></span></p>
                <p><strong>Durata:</strong> <span id="filmDuration"></span></p>
                <p><strong>Valutazione:</strong> <span id="filmRating"></span> <span id="startRating"></span></p>
                <p><strong>Genere:</strong> <span id="FilmGenre"></span></p>
                <p><strong>Studio di Produzione:</strong> <span id="filmStudio"></span></p>
                <p><strong>Descrizione:</strong> <span id="filmDescription"></span></p>
            </div>
        </div>

        <!-- Attori e Crew sotto il corpo principale -->
        <div class="card-body">
            <p><strong>Attori:</strong> <span id="filmActors"></span></p>
            <p><strong>Crew:</strong><span id="filmCrew"></span>
            <span id="crewDescription"></span>
            </p>
            <p><strong>Paesi di produzione:</strong> <span id="filmCountry"></span></p>
            <p><strong>Temi discussi:</strong> <span id="filmTheme"></span></p>
        </div>
    </div>
</div>

<!-- Rotten Tomatoes Reviews Section -->
<div class="container mt-4">
    <div class="card">
        <div class="card-header d-flex align-items-center">
            <i class="fas fa-comments me-2 text-warning"></i>
            <h3 class="mb-0">Rotten Tomatoes Reviews</h3>
            <span class="badge {{#if reviewsCount}}bg-success{{else}}bg-secondary{{/if}} ms-auto" id="reviewsCountBadge">{{reviewsCount}}</span>
        </div>
        <div class="card-body p-0">
            <!-- Scrollable Reviews Container - Always rendered for JavaScript to work -->
            <div class="reviews-container" style="max-height: 600px; overflow-y: auto; padding: 1rem;">
                <div id="reviewsContent">
                    <!-- Reviews will be loaded here via JavaScript -->
                    <div class="text-center py-4">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Loading reviews...</span>
                        </div>
                        <p class="mt-2 text-muted">Loading reviews...</p>
                    </div>
                </div>
                <div id="loadMoreContainer" class="text-center mt-3" style="display: none;">
                    <button id="loadMoreBtn" class="btn btn-outline-primary">
                        <i class="fas fa-plus me-2"></i>Load More Reviews
                    </button>
                </div>
                <div id="noMoreReviews" class="text-center text-muted mt-3" style="display: none;">
                    <i class="fas fa-check-circle me-2"></i>All reviews loaded
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Hidden template for review cards -->
<script type="text/template" id="reviewCardTemplate">
    <div class="card mb-3 shadow-sm">
        <div class="card-body">
            <div class="d-flex align-items-start">
                <div class="review-icon me-3">
                    <i class="fas {THUMB_CLASS} {THUMB_COLOR}" style="font-size: 1.5em;"></i>
                </div>
                <div class="flex-grow-1">
                    <div class="d-flex justify-content-between align-items-start mb-3">
                        <div>
                            <h5 class="mb-1 text-primary">
                                {CRITIC_NAME}
                                {TOP_CRITIC_BADGE}
                            </h5>
                            <div class="text-muted mb-2">
                                <strong class="text-info">Movie:</strong> {MOVIE_TITLE}<br>
                                {PUBLISHER_INFO}
                                {DATE_INFO}
                            </div>
                        </div>
                        <span class="badge {BADGE_CLASS} fs-6">
                            {REVIEW_TYPE}
                        </span>
                    </div>
                    <div class="review-content">
                        <p class="mb-0 text-dark lh-base">
                            {REVIEW_CONTENT}
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</script>


{{>Chatbox}}
<script src="Js/index_Reviews.js"></script>
<script src="Js/index_FilmScheda.js"></script>
